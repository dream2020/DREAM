<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Component Documentation: cameraSelection</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="customdoxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="DREAM_223x59.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Component Documentation
   &#160;<span id="projectnumber">v0.01</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',false,false,'search.php','Search');
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group___d_r_e_a_m__camera_selection.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">cameraSelection</div>  </div>
</div><!--header-->
<div class="contents">

<p>Interface file for the cameraSelection DREAM component.  
<a href="#details">More...</a></p>
<h1><a class="anchor" id="component_description"></a>
Component Description</h1>
<p>Read 3 images from 3 cameras and selected one with the best front face.</p>
<p>During front face detection, it identifies the face location, 49 facial landmarks, eyes' locations, headgaze and eyegaze. It should be noted that all the axises are local, relative the selected camera. Face identification is based on Cascade Classification that is provided by OPENCV. 49 faical landmarks and handgaze are obtaine based on a paper titled as "Supervised descent method and its applications to face alignment" by Xuehan Xiong etc, and the source code is downloaded from <a href="http://www.humansensing.cs.cmu.edu/intraface/">http://www.humansensing.cs.cmu.edu/intraface/</a>. Haibing Cai provided the souce code for eye location identification and eyegaze estimation</p>
<h1><a class="anchor" id="lib_sec"></a>
Libraries</h1>
<ul>
<li>YARP.</li>
<li>OpenCV.</li>
<li>"IntraFaceDLL.lib". It is a public Libaray provied by Xuehan Xiong, etc.</li>
</ul>
<h1><a class="anchor" id="parameters_sec"></a>
Parameters</h1>
<p><b>Command-line Parameters </b></p>
<p>All configuration file parameters can also be given as command line parameters. Please refer to the following section for details.</p>
<p><b>Configuration File Parameters</b></p>
<p>The following key-value pairs can be specified as parameters in the configuration file (they can also be specified as command-line parameters if you so wish). The value part can be changed to suit your needs; the default values are shown below.</p>
<table class="doxtable">
<tr>
<th align="left">Key </th><th align="left">Value </th><th align="left">Description  </th></tr>
<tr>
<td align="left">name </td><td align="left">cameraSelection </td><td align="left">The component name in YARP </td></tr>
<tr>
<td align="left">inputPortM </td><td align="left">/cameraSelection/camMid:i </td><td align="left">The input port name to which the image from the middle camera should be streamed </td></tr>
<tr>
<td align="left">inputPortL </td><td align="left">/cameraSelection/camLeft:i </td><td align="left">The input port name to which the image from the left camera should be streamed </td></tr>
<tr>
<td align="left">inputPortR </td><td align="left">/cameraSelection/camRight:i </td><td align="left">The input port name to which the image from the right camera should be streamed </td></tr>
<tr>
<td align="left">outputPort </td><td align="left">/cameraSelection/cam:o </td><td align="left">The complete output port name to which the image from the seletected camera should be streamed </td></tr>
<tr>
<td align="left">outputPortCameraID </td><td align="left">/cameraSelection/camID:o </td><td align="left">The complete output port name to which the image from the seletected camera's ID should be streamed </td></tr>
<tr>
<td align="left">outputPortFaceLocation2D </td><td align="left">/cameraSelection/faceLocation2D:o </td><td align="left">The complete output port name to which the face location should be streamed </td></tr>
<tr>
<td align="left">outputPortFacialLandmark2D </td><td align="left">/cameraSelection/faceLandmark2D:o </td><td align="left">The complete output port name to which the face landmarks should be streamed </td></tr>
<tr>
<td align="left">outputPortHeadposeLocal </td><td align="left">/cameraSelection/headposeLocal:o </td><td align="left">The complete output port name to which the head pose should be streamed </td></tr>
<tr>
<td align="left">outputPortEyeLocation2D </td><td align="left">/cameraSelection/eyeLocation2D:o </td><td align="left">The complete output port name to which the eye location should be streamed </td></tr>
<tr>
<td align="left">outputPortEyeGazeLocal </td><td align="left">/cameraSelection/eyeGazeLocal:o </td><td align="left">The complete output port name to which the eye gaze should be streamed </td></tr>
<tr>
<td align="left">outputPortFaceID </td><td align="left">/cameraSelection/faceID:o </td><td align="left">The complete output port name to which the face ID should be streamed </td></tr>
<tr>
<td align="left">outputPortFaceExpression </td><td align="left">/cameraSelection/faceExpression:o </td><td align="left">The complete output port name to which the faceExpression ID should be streamed </td></tr>
<tr>
<td align="left">frequency </td><td align="left">20 </td><td align="left">specifies the maxium frequency of streaming image to the YARP server. </td></tr>
<tr>
<td align="left">width </td><td align="left">1280 </td><td align="left">specifies the width of the image to be streamed. </td></tr>
<tr>
<td align="left">height </td><td align="left">960 </td><td align="left">specifies the height of the image to be streamed. </td></tr>
<tr>
<td align="left">faceDetectionModelName </td><td align="left">haarcascade_frontalface_alt2.xml</td><td align="left">specifies the classifier for face identification </td></tr>
<tr>
<td align="left">facialLandmarkDetectModelName </td><td align="left">DetectionModel-v1.5.bin </td><td align="left">specifies the detector for 49 facial landmark detection </td></tr>
<tr>
<td align="left">facialLandmarkTrackingModelName </td><td align="left">TrackingModel-v1.10.bin </td><td align="left">specifies the trackor for 49 facial landmark tracking </td></tr>
<tr>
<td align="left">facialExpressionClassifierName </td><td align="left">ExpressionClassifier.xml </td><td align="left">specifies the classifier for facial Exression recognition (Not in realtime) </td></tr>
<tr>
<td align="left">faceIDClassifierName </td><td align="left">FaceIDClassifier.xml </td><td align="left">specifies the classifier for face ID recognition (Not in realtime) </td></tr>
</table>
<h1><a class="anchor" id="portsa_sec"></a>
Ports Accessed</h1>
<ul>
<li>None</li>
</ul>
<h1><a class="anchor" id="portsc_sec"></a>
Ports Created</h1>
<p><b>Input ports</b> </p><pre class="fragment">/cameraSelection/camMid:i
/cameraSelection/camLeft:i      
/cameraSelection/camRight:i
</pre><p><b>Output ports</b> </p><pre class="fragment">/cameraSelection/cam:o
/cameraSelection/camID:o
/cameraSelection/faceLocation2D:o
/cameraSelection/faceLandmark2D:o
/cameraSelection/headposeLocal:o
/cameraSelection/eyeLocation2D:o
/cameraSelection/eyeGazeLocal:o
/cameraSelection/faceID:o
/cameraSelection/faceExpression:o
</pre><p><b>Port types </b></p>
<p>The functional specification only names the ports to be used to communicate with the module but doesn't say anything about the data transmitted on the ports. This is defined by the following code. </p><pre class="fragment">BufferedPort&lt;ImageOf&lt;PixelRgb&gt;&gt;  imagePortInM;   // input port for an image 
BufferedPort&lt;ImageOf&lt;PixelRgb&gt;&gt;  imagePortInL;   // input port for an image 
BufferedPort&lt;ImageOf&lt;PixelRgb&gt;&gt;  imagePortInR;   // input port for an image 
BufferedPort&lt;ImageOf&lt;PixelRgb&gt;&gt;  imageOut;       // output port for an image
BufferedPort&lt;VectorOf&lt;int&gt;&gt;      cameraDeviceLabelOut; // length =1,  [id, flag]
BufferedPort&lt;VectorOf&lt;double&gt;&gt;   faceLocation2DOut;    // length =2,  [N, face1.x, face1.y, face2.x, face2.y, ...]
BufferedPort&lt;VectorOf&lt;double&gt;&gt;   facialLandmarks2DOut; // length =98, [mark1.x, mark1.y, mark2.x, mark2.y,...]
BufferedPort&lt;VectorOf&lt;double&gt;&gt;   headposeLocalOut;     // length =4,  [pitch, yaw, rol, flag]
BufferedPort&lt;VectorOf&lt;double&gt;&gt;   eyeLocation2DOut;     // length =5,  [righteye.x, righteye.y, lefteye.x, lefteye.y, flag]
BufferedPort&lt;VectorOf&lt;double&gt;&gt;   eyeGazeLocalOut;      // length =4,  [pitch, yaw, rol, flag]
BufferedPort&lt;VectorOf&lt;int&gt;&gt;      faceIDOut;            // length =2,  [ID, flag] 
BufferedPort&lt;VectorOf&lt;int&gt;&gt;      faceExpressIDOut;     // length =2,  [ID, flag] 
</pre><h1><a class="anchor" id="in_files_sec"></a>
Input Data Files</h1>
<ul>
<li>None</li>
</ul>
<h1><a class="anchor" id="out_data_sec"></a>
Output Data Files</h1>
<ul>
<li>None</li>
</ul>
<h1><a class="anchor" id="conf_file_sec"></a>
Configuration Files</h1>
<p><code>cameraSelection.ini</code> in <code>$DREAM_ROOT/submitted/PORT/components/cameraSelection/config</code> </p>
<h1><a class="anchor" id="tested_os_sec"></a>
Tested OS</h1>
<ul>
<li>Windows</li>
</ul>
<h1><a class="anchor" id="example_sec"></a>
Example Instantiation of the Component</h1>
<p><code>&ndash;context ../submitted/Port/components/cameraSelection/config</code></p>
<dl class="section author"><dt>Author</dt><dd>Yinfeng Fang, Haibin Cai, Xiaodong Jiang, Yiming Wang and Honghai Liu </dd></dl>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Fri Mar 31 2017 02:58:17 for Component Documentation by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
