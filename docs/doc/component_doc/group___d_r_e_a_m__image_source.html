<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Component Documentation: imageSource</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="customdoxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="DREAM_223x59.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Component Documentation
   &#160;<span id="projectnumber">v0.01</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',false,false,'search.php','Search');
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group___d_r_e_a_m__image_source.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">imageSource</div>  </div>
</div><!--header-->
<div class="contents">

<p>Interface file for the imageSourse DREAM component.  
<a href="#details">More...</a></p>
<h1><a class="anchor" id="component_description"></a>
Component Description</h1>
<p>Read an image from a file and stream it with specified dimensions to a specified port. Add random noise to differentiate between each image streamed.</p>
<p>If the window key-value pair is set to 1, and provided the dimensions of the image read from file is larger than the dimensions of the image to be streamed (as specified in the width and height key-value pairs), then we extract a sub-image of the required dimensions. The scan pattern is random if the random key-value pair is set to 1; otherwise it is a regular scan pattern in row major order, with x and y increment equal to the values specified by the xShift and yShift key-value pair. In either case (random or regular scan), the module also writes the gaze angles to an output port, simulating the functionality of the attentionSelection module. It also writes encoder values for the head, simulating the functionality of the /robot/head/state:o port on the robot.</p>
<h1><a class="anchor" id="lib_sec"></a>
Libraries</h1>
<ul>
<li>YARP.</li>
</ul>
<h1><a class="anchor" id="parameters_sec"></a>
Parameters</h1>
<p><b>Command-line Parameters</b></p>
<p>The following key-value pairs can be specified as command-line parameters by prefixing &ndash; to the key (e.g. <code>&ndash;from</code> file.ini . The value part can be changed to suit your needs; the default values are shown below.</p>
<ul>
<li><code>from</code> <code>imageSource.ini</code> <ul>
<li>The configuration file</li>
</ul>
</li>
<li><code>context</code> <code>components/imageSource/config</code> <ul>
<li>specifies the sub-path from <code>$DREAM_ROOT/release</code> to the configuration file</li>
</ul>
</li>
<li><code>name</code> <code>imageSource</code> <ul>
<li>The name of the module (used to form the stem of module port names)</li>
</ul>
</li>
</ul>
<p><b>Configuration File Parameters</b></p>
<p>The following key-value pairs can be specified as parameters in the configuration file (they can also be specified as command-line parameters if you so wish). The value part can be changed to suit your needs; the default values are shown below.</p>
<table class="doxtable">
<tr>
<th align="left">Key </th><th align="left">Value  </th></tr>
<tr>
<td align="left">outputPort </td><td align="left">/image:o </td></tr>
</table>
<p>The complete output port name to which the image should be streamed</p>
<table class="doxtable">
<tr>
<th align="left">Key </th><th align="left">Value  </th></tr>
<tr>
<td align="left">gazePort </td><td align="left">/gaze:o </td></tr>
</table>
<p>The complete output port name to which the gaze angles should be streamed</p>
<table class="doxtable">
<tr>
<th align="left">Key </th><th align="left">Value  </th></tr>
<tr>
<td align="left">encoderPort </td><td align="left">/robot/head/state:o </td></tr>
</table>
<p>The complete output port name to which the encoder values should be streamed</p>
<table class="doxtable">
<tr>
<th align="left">Key </th><th align="left">Value  </th></tr>
<tr>
<td align="left">imageFile </td><td align="left">image.ppm </td></tr>
</table>
<p>specifies the image filename</p>
<table class="doxtable">
<tr>
<th align="left">Key </th><th align="left">Value  </th></tr>
<tr>
<td align="left">frequency </td><td align="left">10 </td></tr>
</table>
<p>specifies the number of images to be streamed per second. A low frequency avoids this module hogging the CPU; this is important if you are streaming several images</p>
<table class="doxtable">
<tr>
<th align="left">Key </th><th align="left">Value  </th></tr>
<tr>
<td align="left">width </td><td align="left">320 </td></tr>
</table>
<p>specifies the width of the image to be streamed. The image read from the file is rescaled if necessary.</p>
<table class="doxtable">
<tr>
<th align="left">Key </th><th align="left">Value  </th></tr>
<tr>
<td align="left">height </td><td align="left">240 </td></tr>
</table>
<p>specifies the height of the image to be streamed. The image read from the file is rescaled if necessary.</p>
<table class="doxtable">
<tr>
<th align="left">Key </th><th align="left">Value  </th></tr>
<tr>
<td align="left">noise </td><td align="left">20 </td></tr>
</table>
<p>specifies the random noise level</p>
<table class="doxtable">
<tr>
<th align="left">Key </th><th align="left">Value  </th></tr>
<tr>
<td align="left">window </td><td align="left">0 </td></tr>
</table>
<p>specifies whether or not to extract a sub-image (default 0 is not to do so, in which case the image is scaled)</p>
<table class="doxtable">
<tr>
<th align="left">Key </th><th align="left">Value  </th></tr>
<tr>
<td align="left">random </td><td align="left">0 </td></tr>
</table>
<p>specifies the scan pattern when extracting a sub-image (default 0 is regular scan, row major order)</p>
<table class="doxtable">
<tr>
<th align="left">Key </th><th align="left">Value  </th></tr>
<tr>
<td align="left">xShift </td><td align="left">5 </td></tr>
</table>
<p>specifies the horizontal shift in pixels to be used in window mode</p>
<table class="doxtable">
<tr>
<th align="left">Key </th><th align="left">Value  </th></tr>
<tr>
<td align="left">yShift </td><td align="left">5 </td></tr>
</table>
<p>specifies the vertical shift in pixels to be used in window mode</p>
<table class="doxtable">
<tr>
<th align="left">Key </th><th align="left">Value  </th></tr>
<tr>
<td align="left">horizontalViewAngle </td><td align="left">120.0 </td></tr>
</table>
<p>specifies the horizontal field of view in degrees</p>
<table class="doxtable">
<tr>
<th align="left">Key </th><th align="left">Value  </th></tr>
<tr>
<td align="left">verticalViewAngle </td><td align="left">90.0 </td></tr>
</table>
<p>specifies the vertical field of view in degrees</p>
<p>Note: neither of the port names above (<code>/image</code>:o or <code>/gaze</code>:o) will be prefixed with module name (i.e. <code>/imageSource</code>) since the purpose of this module is to simulate the output ports of other modules (e.g. <code>/robot/cam/left</code> or <code>/attentionSelection/o</code>:position)</p>
<h1><a class="anchor" id="portsa_sec"></a>
Ports Accessed</h1>
<ul>
<li>None</li>
</ul>
<h1><a class="anchor" id="portsc_sec"></a>
Ports Created</h1>
<p><b>Input ports</b></p>
<ul>
<li><code>/imageSource</code> </li>
</ul>
<p>This port is used to change the parameters of the module at run time or stop the module. The following commands are available </p><pre class="fragment">help
quit
set noise         &lt;n&gt;     ... set the random noise level (where &lt;n&gt; is an integer number in the range 0-255).
</pre><p>Note that the name of this port mirrors whatever is provided by the <code>&ndash;name</code> parameter value The port is attached to the terminal so that you can type in commands and receive replies. The port can be used by other modules but also interactively by a user through the yarp rpc directive, viz.: <code>yarp</code> <code>rpc</code> <code>/imageSource</code> This opens a connection from a terminal to the port and allows the user to then type in commands and receive replies.</p>
<p><b>Output ports</b> </p><pre class="fragment">/imageSource
</pre><p>see above </p><pre class="fragment">/image:o
/gaze:o
/robot/head/state:o
</pre><p><b>Port types </b></p>
<p>The functional specification only names the ports to be used to communicate with the module but doesn't say anything about the data transmitted on the ports. This is defined by the following code. </p><pre class="fragment">BufferedPort&lt;ImageOf&lt;PixelRgb&gt; &gt;   outputPort;      
BufferedPort&lt;VectorOf&lt;double&gt; &gt;    gazeOutPort;     //double azimuth, elevation, 'a', 0, 0
BufferedPort&lt;VectorOf&lt;double&gt; &gt;    encoderOutPort;  //double 0, 1, 2, 3, 4, 5
</pre><p>Note that the protocol used for the gazeOutPort is the same as that used by the attentionSelection module when controlling the controlGaze2 module using the /pos port.</p>
<h1><a class="anchor" id="in_files_sec"></a>
Input Data Files</h1>
<p><code>image.ppm</code>, or whatever is specified as a argument for the <code>&ndash;imageFile</code> <code>key-value</code>.</p>
<h1><a class="anchor" id="out_data_sec"></a>
Output Data Files</h1>
<p>None</p>
<h1><a class="anchor" id="conf_file_sec"></a>
Configuration Files</h1>
<p><code>imageSource.ini</code> in <code>$DREAM_ROOT/release/components/imageSource/config</code> </p>
<h1><a class="anchor" id="tested_os_sec"></a>
Tested OS</h1>
<ul>
<li>Windows</li>
</ul>
<h1><a class="anchor" id="example_sec"></a>
Example Instantiation of the Component</h1>
<p><code>imageSource &ndash;name imageSource &ndash;context components/imageSource/config &ndash;from imageSource.ini </code></p>
<dl class="section author"><dt>Author</dt><dd>David Vernon</dd></dl>
<p>Copyright (C) 2014 DREAM Consortium </p>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Mon Dec 11 2017 00:29:18 for Component Documentation by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
