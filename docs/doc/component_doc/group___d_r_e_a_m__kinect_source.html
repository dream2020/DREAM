<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Component Documentation: kinectSource</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="customdoxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="DREAM_223x59.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Component Documentation
   &#160;<span id="projectnumber">v0.01</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',false,false,'search.php','Search');
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group___d_r_e_a_m__kinect_source.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">kinectSource</div>  </div>
</div><!--header-->
<div class="contents">

<p>Interface file for the kinectSource DREAM component.  
<a href="#details">More...</a></p>
<h1><a class="anchor" id="component_description"></a>
Component Description</h1>
<p>Read RGB and depth information from 2 Kinects, and obtain the information of the joints of the upper body, the center of the body, arm angle, motion ID and sound direction. This component fully relies on Microsoft SDK for Kinect. Moreover, the component transfers local coordinates to global ones.</p>
<h1><a class="anchor" id="lib_sec"></a>
Libraries</h1>
<ul>
<li>YARP.</li>
<li>OpenCV.</li>
<li>Kinect for Windows SDK 1.8</li>
<li>blob lib</li>
</ul>
<h1><a class="anchor" id="parameters_sec"></a>
Parameters</h1>
<p><b>Command-line Parameters </b></p>
<p>All configuration file parameters can also be given as command line parameters. Please refer to the following section for details.</p>
<p><b>Configuration File Parameters</b></p>
<p>The following key-value pairs can be specified as parameters in the configuration file (they can also be specified as command-line parameters if you so wish). The value part can be changed to suit your needs; the default values are shown below.</p>
<table class="doxtable">
<tr>
<th align="left">Key </th><th align="left">Value </th><th align="left">Description  </th></tr>
<tr>
<td align="left">name </td><td align="left">kinectSource </td><td align="left">The component name in YARP </td></tr>
<tr>
<td align="left">outputPortFrontColor </td><td align="left">/kinectSource/frontColor:o </td><td align="left">The output port name to which the RGB image from the front Kinect camera should be streamed </td></tr>
<tr>
<td align="left">outputPortFrontDepth </td><td align="left">/kinectSource/frontDepth:o </td><td align="left">The output port name to which the depth image from the front Kinect camera should be streamed </td></tr>
<tr>
<td align="left">outputPortUpColor </td><td align="left">/kinectSource/upColor:o </td><td align="left">The output port name to which the RGB image from the upper Kinect camera should be streamed </td></tr>
<tr>
<td align="left">outputPortUpDepth </td><td align="left">/kinectSource/upDepth:o </td><td align="left">The output port name to which the depth image from the upper Kinect camera should be streamed </td></tr>
<tr>
<td align="left">outputPortArmAngle </td><td align="left">/kinectSource/armAngle:o </td><td align="left">The complete output port name to which the arm angles should be streamed </td></tr>
<tr>
<td align="left">outputPortBodyCenter </td><td align="left">/kinectSource/bodyCenter:o </td><td align="left">The complete output port name to which the position of body Center should be streamed </td></tr>
<tr>
<td align="left">outputPortBodyJoints </td><td align="left">/kinectSource/bodyJoints:o </td><td align="left">The complete output port name to which the joints position of the upper body should be streamed </td></tr>
<tr>
<td align="left">outputPortObjects </td><td align="left">/kinectSource/objects:o </td><td align="left">The complete output port name to which the objects related information should be streamed </td></tr>
<tr>
<td align="left">outputPortSoundRelatedInformation</td><td align="left">/kinectSource/soundRelatedInformation:o </td><td align="left">The complete output port name to which the sound related information should be streamed </td></tr>
<tr>
<td align="left">outputPortFacesAndEyes3D </td><td align="left">/kinectSource/facesAndEyes3D:o </td><td align="left">The complete output port name to which the face &amp; eye location in 3D should be streamed </td></tr>
<tr>
<td align="left">outputPortHeadposeAndGazeGlobal </td><td align="left">/kinectSource/headposeAndGazeGlobal:o </td><td align="left">The complete output port name to which the global head pose and gaze should be streamed </td></tr>
<tr>
<td align="left">outputPortMotions </td><td align="left">/kinectSource/motions:o </td><td align="left">The complete output port name to which the motion ID should be streamed </td></tr>
<tr>
<td align="left">inputPortMotions </td><td align="left">/kinectSource/motions:i </td><td align="left">The complete output port name to which the motion ID should be streamed </td></tr>
<tr>
<td align="left">inputPortCamID </td><td align="left">/kinectSource/camID:i </td><td align="left">The complete input port name to which camera ID should be streamed </td></tr>
<tr>
<td align="left">inputPortFaceLocation2D </td><td align="left">/kinectSource/faceLocation2D:i </td><td align="left">The complete input port name to which face location in 2D should be streamed </td></tr>
<tr>
<td align="left">inputPortHeadposeLocal </td><td align="left">/kinectSource/headposeLocal:i </td><td align="left">The complete input port name to which local head pose should be streamed </td></tr>
<tr>
<td align="left">inputPortEyeLocation2D </td><td align="left">/kinectSource/eyeLocation2D:i </td><td align="left">The complete input port name to which eyes' location in 2D should be streamed </td></tr>
<tr>
<td align="left">inputPortEyeGazeLocal </td><td align="left">/kinectSource/eyeGazeLocal:i </td><td align="left">The complete input port name to which local gaze should be streamed </td></tr>
<tr>
<td align="left">kinectDeviceIDFront </td><td align="left">0 </td><td align="left">Specifies the ID of the front Kinect </td></tr>
<tr>
<td align="left">kinectDeviceIDUp </td><td align="left">1 </td><td align="left">Specifies the ID of the upper Kinect </td></tr>
<tr>
<td align="left">frequency </td><td align="left">20 </td><td align="left">specifies the maximum frequency of streaming image to the YARP server </td></tr>
<tr>
<td align="left">width </td><td align="left">640 </td><td align="left">specifies the width of the image to be streamed </td></tr>
<tr>
<td align="left">height </td><td align="left">480 </td><td align="left">specifies the height of the image to be streamed </td></tr>
<tr>
<td align="left">CameraLKMatDMatName </td><td align="left">CameraLKMatDMat.xml </td><td align="left">specifies the matrix file for coordination transformation </td></tr>
<tr>
<td align="left">CameraLRMatTMatName </td><td align="left">CameraLRMatTMat.xml </td><td align="left">specifies the matrix file for coordination transformation </td></tr>
<tr>
<td align="left">CameraMKMatDMatName </td><td align="left">CameraMKMatDMat.xml </td><td align="left">specifies the matrix file for coordination transformation </td></tr>
<tr>
<td align="left">CameraMRMatTMatName </td><td align="left">CameraMRMatTMat.xml </td><td align="left">specifies the matrix file for coordination transformation </td></tr>
<tr>
<td align="left">CameraRKMatDMatName </td><td align="left">CameraRKMatDMat.xml </td><td align="left">specifies the matrix file for coordination transformation </td></tr>
<tr>
<td align="left">CameraRRMatTMatName </td><td align="left">CameraRRMatTMat.xml </td><td align="left">specifies the matrix file for coordination transformation </td></tr>
<tr>
<td align="left">Kinect0KMatDMatName </td><td align="left">Kinect0KMatDMat.xml </td><td align="left">specifies the matrix file for coordination transformation </td></tr>
<tr>
<td align="left">Kinect1KMatDMatName </td><td align="left">Kinect1KMatDMat.xml </td><td align="left">specifies the matrix file for coordination transformation </td></tr>
<tr>
<td align="left">Kinect1RMatTMatName </td><td align="left">Kinect1RMatTMat.xml </td><td align="left">specifies the matrix file for coordination transformation </td></tr>
<tr>
<td align="left">MotionRecognitionVocabularyName </td><td align="left">MotionRCVocalbulary.xml </td><td align="left">specifies the centres of clusters for the motion features </td></tr>
<tr>
<td align="left">MotionRecognitionClassifierName </td><td align="left">MotionRCSVM.xml </td><td align="left">specifies the trained classifier for motion recognition </td></tr>
</table>
<h1><a class="anchor" id="portsa_sec"></a>
Ports Accessed</h1>
<ul>
<li>None</li>
</ul>
<h1><a class="anchor" id="portsc_sec"></a>
Ports Created</h1>
<p><b>Input ports</b> </p><pre class="fragment">/kinectSource/camID:i
/kinectSource/faceLocation2D:i
/kinectSource/headposeLocal:i
/kinectSource/eyeLocation2D:i  
/kinectSource/eyeGazeLocal:i
/kinectSource/motions:i
</pre><p><b>Output ports</b> </p><pre class="fragment">/kinectSource/frontColor:o
/kinectSource/frontDepth:o
/kinectSource/upColor:o
/kinectSource/upDepth:o
/kinectSource/armAngle:o
/kinectSource/bodyCenter:o 
/kinectSource/bodyJoints:o
/kinectSource/objects:o
/kinectSource/soundRelatedInformation:o
/kinectSource/facesAndEyes3D:o
/kinectSource/headposeAndGazeGlobal:o
/kinectSource/motions:o
</pre><p><b>Port types </b></p>
<p>The functional specification only names the ports to be used to communicate with the module but doesn't say anything about the data transmitted on the ports. This is defined by the following code.</p>
<pre class="fragment">BufferedPort&lt;ImageOf&lt;PixelRgb&gt; &gt; imageFrontColorOut;                // output port for RGB images from the front kinect
BufferedPort&lt;ImageOf&lt;PixelRgb&gt; &gt; imageFrontDepthOut;                // output port for depth images from the front kinect
BufferedPort&lt;ImageOf&lt;PixelRgb&gt; &gt; imageUpColorOut;               // output port for RGB images from the upper kinect
BufferedPort&lt;ImageOf&lt;PixelRgb&gt; &gt; imageUpDepthOut;               // output port for depth images from the upper kinect
BufferedPort&lt;VectorOf&lt;double&gt;&gt;   armAngleOut;                   // [left_elevation, left_azimuth, right_elevation, right_azimuth, state] 
BufferedPort&lt;VectorOf&lt;double&gt;&gt;   bodyCenterOut;                 // [bodyCenterOut.x, bodyCenterOut.y, bodyCenterOut.z, state]
BufferedPort&lt;VectorOf&lt;double&gt;&gt;   upJointOut;                        // [joint1.x, joint1.y, joint1.z, ..., joint10.x, joint10.y, joint10.z,state]
BufferedPort&lt;VectorOf&lt;double&gt;&gt;   objectsOut;                        // [o1.x, o1.y, o1.z, o1.id, o2.x, o2.y, o2.z, o2.id]
BufferedPort&lt;VectorOf&lt;double&gt;&gt;   soundRelatedInformationOut;     // [horizontal_sound_direction, vertical_sound_direction, voice_ID, speech_ID, state]
BufferedPort&lt;VectorOf&lt;double&gt;&gt;   faceAndEyesOut;                    // [state, CamID, leye.x, leye.y, leye.z, reye.x, reye.y, reye.z, N, face1.x, face1.y, face1.z, faceN.x, faceN.y, faceN.z]
BufferedPort&lt;VectorOf&lt;double&gt;&gt;   headposeAndGazeGlobalOut;      // [state, headgaze.x, headgaze.y, headgaze.z, eyegaze.x, eyegaze.y, eyegaze.z]
BufferedPort&lt;VectorOf&lt;double&gt;&gt;   motionsOut;                     // [p1, p2, ..., p12, label]. Pi (i = 1,..., 11,12(no motion)) indicates the predicted probability of motion i.  
BufferedPort&lt;VectorOf&lt;int&gt;&gt;      motionsIn;                      // [duration, expectedMotionID]
BufferedPort&lt;VectorOf&lt;int&gt;&gt;      cameraIDIn;                     // [id, flag]
BufferedPort&lt;VectorOf&lt;double&gt;&gt;   facesIn;                       // [N, face1.x, face1.y, face2.x, face2.y, ...]
BufferedPort&lt;VectorOf&lt;double&gt;&gt;   headposeIn;                        // [pitch, yaw, roll, flag]
   BufferedPort&lt;VectorOf&lt;double&gt;&gt;   eyesIn;                         // [righteye.x, righteye.y, lefteye.x, lefteye.y, flag]
BufferedPort&lt;VectorOf&lt;double&gt;&gt;   eyeGazeIn;                     // [pitch, yaw, roll, flag]
</pre><h1><a class="anchor" id="in_files_sec"></a>
Input Data Files</h1>
<ul>
<li>None</li>
</ul>
<h1><a class="anchor" id="out_data_sec"></a>
Output Data Files</h1>
<ul>
<li>None</li>
</ul>
<h1><a class="anchor" id="conf_file_sec"></a>
Configuration Files</h1>
<p><code>kinectSource.ini</code> in <code>$DREAM_ROOT/release/components/kinectSource/config</code> </p>
<h1><a class="anchor" id="example_sec"></a>
Example Instantiation of the Component</h1>
<p><code>&ndash;context ../release/components/kinectSource/config</code></p>
<dl class="section author"><dt>Author</dt><dd>Yinfeng Fang, Dongxu Gao, Haibin Cai, Xiaodong Jiang, Ting Wang, xiaolong Zhou and Honghai Liu </dd></dl>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Fri Mar 31 2017 02:58:17 for Component Documentation by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
